# JVM总体架构
JVM是JRE的一部分，它是一个虚构出来的计算机，是通过在实际的计算机上仿真模拟各种计算机功能来实现的。JVM有自己完善的硬件架构，如处理器、堆栈、寄存器等，还具有相应的指令系统。

#### JVM分为三个主要子系统
（1）类加载器子系统 （2）运行时数据区（我们核心关注这里的栈、堆、方法区） （3）执行引擎

#### 虚拟机栈 stack
Stack 每创建一个线程就会对应创建一个Java栈，所以Java栈也是“线程私有”的内存区域，这个栈中又会对应包含多个栈帧，每调用一个方法时就会往栈中创建并压入一个栈帧，栈帧是用来存储方法数据和部分过程结果的数据结构

#### 方法区
存储类结构信息：常量池、静态变量（static）、构造函数等类型信息
方法区是线程共享的

#### 堆 heap
存储java实例或者对象的地方，是GC的主要区域，同样是线程共享的区域

#### 总结
1、所有线程共享的内存数据区：方法区，堆。而虚拟机栈，本地方法栈和程序计数器都是线程私有的
2、存放于栈中的东西如下：
2.1 每个线程包含一个栈区，栈中只保存基础数据类型的对象和自定义对象的引用（不是对象）。对象都存放在堆去中。
2.2 每个栈中的数据（基础数据类型和对象引用）都是私有的，其他栈不能访问。
2.3 方法的形式参数，方法调用完后从栈空间回收
2.4 引用对象的地址，引用完后，栈空间地址立即回收，堆空间等待GC
3、存放于堆中的东西如下：
3.1 存储的全部是对象，每个对象包含一个与之对应的class信息
3.2 Jvm只有一个堆区（heap）被所有线程共享，堆区中不存放基本类型和对象引用，只存放对象本身
4、存放于方法区中的东西如下：
4.1 存放线程所执行的字节码指令
4.2 跟堆一样，被所有线程共享，方法区包含：所有的class和static变量
4.3 常量吃位于方法区中
