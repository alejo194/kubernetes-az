1.apache添加虚拟机
cat vhostadd.sh
#!/bin/bash
[ $# -le 0] && echo "用法：$0 <虚拟主机域名>" && exit 1
FQDN="$1"
WEBROOT="/var/www/html/${FQDN%%.*}"
CONFIG="/etc/httpd/conf.d/httpd-vhosts.conf"
grep -q "ServerName.*$FQDN" $CONFIG && echo "此站点已存在。" && exit 1
mkdir -p $ WEBROOT
echo "$FQDN" > $WEBROOT/index.html
echo '<VirtualHost *>
        DocumentRoot WEBROOT
        ServerName FQDN
        CustomLog logs/FQND-access_log combined
        ErrorLog logs/FQDN-error_log
</VirtualHost>' >> $CONFIG
sed -i -e "s#WEBROOT#$WEBROOT#g" -e "s#FQDN#$FQDN#g" $CONFIG
service httpd reload
